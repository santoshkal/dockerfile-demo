# STAGE 0
  // Dockerfile generated by Genval
  // Uses Chainguard's distroless wolfi as base image
  FROM cgr.dev/chainguard/wolfi-base AS build
  ENV APP_HOME=/app
  WORKDIR $APP_HOME
  RUN apk update && apk add dotnet-7-sdk
  COPY . .
  RUN dotnet restore --no-cache ./Application/Application.csproj \
      && dotnet build --configuration Release -o out \
      && dotnet publish -c Release --use-current-runtime --self-contained false -o out

# STAGE 1
  FROM cgr.dev/chainguard/wolfi-base As Final
  ENV APP_HOME=/app
  WORKDIR $APP_HOME
  COPY --from=build /app/out/ .
  EXPOSE 80
  ENTRYPOINT ["dotnet", "./AuthorService.dll"]
